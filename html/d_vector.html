<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>gslcpp: About gsl::vector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">gslcpp
   </div>
   <div id="projectbrief">Modern-C++ Wrapper for GSL</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">About <a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The template-class <a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a> is one of two descendants of <a class="el" href="structgsl_1_1v__iface.html" title="Interface for every kind of vector.">gsl::v_iface</a>.</p>
<p>The other is <a class="el" href="structgsl_1_1vector__view.html" title="Constructor-type for vector-by-reference whose storage is not owned by instance of view.">gsl::vector_view</a>.</p>
<p><a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a> exists to provide constructors for <a class="el" href="structgsl_1_1v__iface.html" title="Interface for every kind of vector.">gsl::v_iface</a>.</p>
<ul>
<li><a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a> provides no interface other than construction.</li>
<li><a class="el" href="structgsl_1_1v__iface.html" title="Interface for every kind of vector.">gsl::v_iface</a> provides almost all of the interfaces that GSL's native vector provides.</li>
<li>Any instance constructed via one of the template-specializations of <a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a> owns memory allocated both for the elements in the vector and for some metadata referring to that memory.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1"></a>
Dynamic Allocation of Memory</h2>
<p>For any element-type <code>T</code> (<code>double</code>, <code>float</code>, <code>complex&lt;long double&gt;</code>, etc.), any instance of <code><a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a>&lt;T,0&gt;</code> has the number of elements determined at run-time.</p>
<ul>
<li>Internally, construction involves a call<ul>
<li>to <code>gsl_vector_alloc()</code> or</li>
<li>to <code>gsl_vector_calloc()</code>.</li>
</ul>
</li>
<li>The pointer returned is stored on the stack inside the instance.</li>
<li>There is also on the stack a pointer to the virtual-function table.<ul>
<li>The ultimate base-class <a class="el" href="classgsl_1_1v__stor_3_01T_01_4.html" title="Specialization, which is interface to storage with two key properties: (1) that size of storage is de...">gsl::v_stor&lt;T&gt;</a>, which manages the pointer, has a virtual destructor.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Static Allocation of Memory</h2>
<p>For any element-type <code>T</code> and positive compile-time integer <code>N</code>, any instance of <code><a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a>&lt;T,N&gt;</code> has the number of elements determined at compile-time.</p>
<ul>
<li>Internally, the elements are allocated on the stack in a C-style array.</li>
<li>The return-value of <code>gsl_vector_view_array()</code> is also stored on the stack in the instance of <a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a>.<ul>
<li>The instance of <code>gsl_vector_view</code> returned by <code>gsl_vector_view_array()</code> consumes about 40 bytes on a 64-bit machine.</li>
</ul>
</li>
<li>There is on the stack no pointer to the virtual-function table.<ul>
<li>There is no virtual destructor in the inheritance-chain.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Example</h2>
<p>The template-parameters to <a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a> often need not be specified because they are deduced by the compiler.</p>
<p>Here is an example-program: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="vector_8hpp.html">gslcpp/vector.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> <a class="code" href="namespacegsl.html#a3b1e707b97c738a685aeee395d68e9b5a42d74ce53c7802f3910dcea049a777d1">gsl::CALLOC</a>;</div>
<div class="line"><span class="keyword">using</span> <a class="code" href="namespacegsl.html#structgsl_1_1complex">gsl::complex</a>;</div>
<div class="line"><span class="keyword">using</span> <a class="code" href="structgsl_1_1vector.html">gsl::vector</a>;</div>
<div class="line"><span class="keyword">using</span> std::cout;</div>
<div class="line"><span class="keyword">using</span> std::endl;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Example-usage of gsl::vector.</span></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  complex&lt;float&gt; <span class="keyword">const</span> a1[]= {{1.0f, -1.0f}, {0.5f, 0.6f}};</div>
<div class="line">  <span class="comment">// Deduce vector&lt;complex&lt;float&gt;,2&gt; and copy from array.</span></div>
<div class="line">  vector v1= a1;</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v1 has, on stack, elements and internal vector-view.\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;Instance of gsl_vector_view consumes 40 bytes on 64-bit hardware.\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;sizeof(v1)=&quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(v1) &lt;&lt; <span class="stringliteral">&quot; v1=&quot;</span> &lt;&lt; v1 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v1.get(1)=&quot;</span> &lt;&lt; v1.<a class="code" href="structgsl_1_1v__iface.html#a6822432c37ecf14609f65b78eded13ae">get</a>(1) &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Deduce vector&lt;double,5&gt;, and copy from initializer-list.</span></div>
<div class="line">  vector v2({1.0, 3.0, 5.0, 7.0, 9.0});</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v2 also has, on stack, elements and internal vector-view.\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;sizeof(v2)=&quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(v2) &lt;&lt; <span class="stringliteral">&quot; v2=&quot;</span> &lt;&lt; v2 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v2.max()=&quot;</span> &lt;&lt; v2.max() &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Deduce vector&lt;double,0&gt;, set size to four, and initialize elements to</span></div>
<div class="line">  <span class="comment">// zero.  Optional argument CALLOC causes initialization to zero.</span></div>
<div class="line">  vector&lt;double&gt; v3(4, <a class="code" href="namespacegsl.html#a3b1e707b97c738a685aeee395d68e9b5a42d74ce53c7802f3910dcea049a777d1">CALLOC</a>);</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v3 has, on stack, pointer to vtable and pointer to gsl_vector.\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;Pointer to vtable is stored because dynamic vector (with compile-\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;time size of 0) has virtual destructor.\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;sizeof(v3)=&quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(v3) &lt;&lt; <span class="stringliteral">&quot; v3=&quot;</span> &lt;&lt; v3 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v3.isnull()=&quot;</span> &lt;&lt; v3.isnull() &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">float</span> a4[]= {1, 2, 3, 4, 5, 6};</div>
<div class="line">  <span class="comment">// Deduce vector&lt;float,0&gt;, set size to four, and copy first four elements</span></div>
<div class="line">  <span class="comment">// from array.  The output contains a subvector of v4: length 2, starting at</span></div>
<div class="line">  <span class="comment">// offset 1 into v4, and with stride 2 relative to v4.</span></div>
<div class="line">  vector v4(a4, 4);</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v4 also has, on stack, ptr to vtable and ptr to gsl_vector.\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;sizeof(v4)=&quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(v4) &lt;&lt; <span class="stringliteral">&quot; v4=&quot;</span> &lt;&lt; v4 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v4.subvector(2, 1, 2)=&quot;</span> &lt;&lt; v4.subvector(2, 1, 2) &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">short</span> a5[]= {1, 2, 3, 4, 5, 6};</div>
<div class="line">  <span class="comment">// Deduce vector&lt;short,0&gt;, set size to 3, and copy first, third, and fifth</span></div>
<div class="line">  <span class="comment">// elements from array.  Optional third argument to constructor is stride.</span></div>
<div class="line">  vector v5(a5, 3, 2);</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v5 also has, on stack, ptr to vtable and ptr to gsl_vector.\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;sizeof(v5)=&quot;</span> &lt;&lt; <span class="keyword">sizeof</span>(v5) &lt;&lt; <span class="stringliteral">&quot; v5=&quot;</span> &lt;&lt; v5 &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">       &lt;&lt; <span class="stringliteral">&quot;v5.max_index()=&quot;</span> &lt;&lt; v5.max_index() &lt;&lt; endl;</div>
<div class="line">}</div>
<div class="line"> </div>
</div><!-- fragment --><p>And here is its output: </p><div class="fragment"><div class="line"> </div>
<div class="line">v1 has, on stack, elements and internal vector-view.</div>
<div class="line">Instance of gsl_vector_view consumes 40 bytes on 64-bit hardware.</div>
<div class="line">sizeof(v1)=56 v1=[(1,-1),(0.5,0.6)]</div>
<div class="line">v1.get(1)=(0.5,0.6)</div>
<div class="line"> </div>
<div class="line">v2 also has, on stack, elements and internal vector-view.</div>
<div class="line">sizeof(v2)=16 v2=[1,3,5,7,9]</div>
<div class="line">v2.max()=9</div>
<div class="line"> </div>
<div class="line">v3 has, on stack, pointer to vtable and pointer to gsl_vector.</div>
<div class="line">Pointer to vtable is stored because dynamic vector (with compile-</div>
<div class="line">time size of 0) has virtual destructor.</div>
<div class="line">sizeof(v3)=16 v3=[0,0,0,0]</div>
<div class="line">v3.isnull()=1</div>
<div class="line"> </div>
<div class="line">v4 also has, on stack, ptr to vtable and ptr to gsl_vector.</div>
<div class="line">sizeof(v4)=16 v4=[1,2,3,4]</div>
<div class="line">v4.subvector(2, 1, 2)=[2,4]</div>
<div class="line"> </div>
<div class="line">v5 also has, on stack, ptr to vtable and ptr to gsl_vector.</div>
<div class="line">sizeof(v5)=16 v5=[1,3,5]</div>
<div class="line">v5.max_index()=2</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Move-Construction</h2>
<p>The move-constructor is also defined for <code><a class="el" href="structgsl_1_1vector.html" title="Constructor-type for vector whose storage is owned by instance of vector.">gsl::vector</a>&lt;T&gt;</code>, and so one could also do something like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;gsl/vector.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using</span> <a class="code" href="structgsl_1_1vector.html">gsl::vector</a>;</div>
<div class="line"> </div>
<div class="line">vector&lt;float,0&gt; read_big_file_into_array();</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  vector v= read_big_file_into_array();</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In compiling the code above, the compiler,</p>
<ul>
<li><em>might</em> elide the constructor-call in the installation of the return-value from <code>read_big_file_into_array()</code> into <code>v</code>, but</li>
<li>is not <em>required</em> to elide the call (according to C++-17), depending on how the vector inside the function is obtained.</li>
</ul>
<p>However, even if the compiler do not elide the call to a constructor, the big array would still not be <em>copied</em> into <code>v</code> because there is a move-constructor that would be called. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="ttc" id="avector_8hpp_html"><div class="ttname"><a href="vector_8hpp.html">vector.hpp</a></div><div class="ttdoc">Definition for gsl::vector.</div></div>
<div class="ttc" id="astructgsl_1_1v__iface_html_a6822432c37ecf14609f65b78eded13ae"><div class="ttname"><a href="structgsl_1_1v__iface.html#a6822432c37ecf14609f65b78eded13ae">gsl::v_iface::get</a></div><div class="ttdeci">T get(size_t i) const</div><div class="ttdoc">Read element with bounds-checking.</div><div class="ttdef"><b>Definition:</b> <a href="v-iface_8hpp_source.html#l00116">v-iface.hpp:116</a></div></div>
<div class="ttc" id="anamespacegsl_html_structgsl_1_1complex"><div class="ttname"><a href="namespacegsl.html#structgsl_1_1complex">gsl::complex</a></div><div class="ttdoc">Complex-number, each of whose components has type A.</div><div class="ttdef"><b>Definition:</b> <a href="complex_8hpp_source.html#l00018">complex.hpp:18</a></div></div>
<div class="ttc" id="anamespacegsl_html_a3b1e707b97c738a685aeee395d68e9b5a42d74ce53c7802f3910dcea049a777d1"><div class="ttname"><a href="namespacegsl.html#a3b1e707b97c738a685aeee395d68e9b5a42d74ce53c7802f3910dcea049a777d1">gsl::CALLOC</a></div><div class="ttdeci">@ CALLOC</div><div class="ttdoc">Initialize each element to zero after allocation.</div><div class="ttdef"><b>Definition:</b> <a href="v-stor_8hpp_source.html#l00052">v-stor.hpp:52</a></div></div>
<div class="ttc" id="astructgsl_1_1vector_html"><div class="ttname"><a href="structgsl_1_1vector.html">gsl::vector</a></div><div class="ttdoc">Constructor-type for vector whose storage is owned by instance of vector.</div><div class="ttdef"><b>Definition:</b> <a href="vector_8hpp_source.html#l00067">vector.hpp:67</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 14 2022 00:01:55 for gslcpp by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
